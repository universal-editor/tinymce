!function(){"use strict";angular.module("tinymce.plugin",["tinymce.plugin.templates","ui.tinymce"]).config(function(){tinyMCE.baseURL="../tinymce-plugin/mce-files"})}(),function(){"use strict";function e(e,i,l){var n,a=this;n=e.parentField?e.parentFieldIndex?e.parentField+"_"+e.parentFieldIndex+"_"+e.fieldName:e.parentField+"_"+e.fieldName:e.fieldName,a.fieldName=e.field.name,a.readonly=e.field.readonly||!1,a.fieldValue="",e.field["tinymce-init"]?(a.wysiwygOptions=e.field["tinymce-init"],a.wysiwygOptions.readonly=a.readonly):a.wysiwygOptions={menubar:e.field.menubar||!0,plugins:"advlist autolink link lists charmap",skin:"lightgray",theme:"modern",readonly:a.readonly},e.$parent.vm.error=[],a.parentFieldIndex=e.parentFieldIndex||!1,e.field.hasOwnProperty("multiple")&&e.field.multiple===!0?(a.multiple=!0,a.fieldValue=[],(e.field.multiname||angular.isString(e.field.multiname))&&(a.multiname=""+e.field.multiname||"value")):(a.multiple=!1,a.fieldValue=""),a.parentFieldIndex&&(a.multiple?(a.fieldValue=[],angular.forEach(l.getFieldValue(e.parentField,e.parentFieldIndex,e.field.name),function(e){a.multiname?a.fieldValue.push(e[a.multiname]):a.fieldValue.push(e)})):a.fieldValue=l.getFieldValue(e.parentField,e.parentFieldIndex,e.field.name)||""),i.addFieldController(this),this.getFieldValue=function(){var i,l={};return a.multiname?(i=[],angular.forEach(a.fieldValue,function(e){var l={};l[a.multiname]=e,i.push(l)})):a.multiple?(i=[],angular.forEach(a.fieldValue,function(e){i.push(e)})):i=a.fieldValue,e.parentField?a.parentFieldIndex?(l[e.parentField]=[],l[e.parentField][a.parentFieldIndex]={},l[e.parentField][a.parentFieldIndex][a.fieldName]=i):(l[e.parentField]={},l[e.parentField][a.fieldName]=i):l[a.fieldName]=i,l},this.getInitialValue=function(){var i={};return e.parentField?a.multiple?(i[e.parentField]={},i[e.parentField][a.fieldName]=[""]):(i[e.parentField]={},i[e.parentField][a.fieldName]=""):a.multiple?i[a.fieldName]=[""]:i[a.fieldName]="",i},a.addItem=function(){a.fieldValue.push("")},a.removeItem=function(e){angular.forEach(a.fieldValue,function(i,l){l==e&&a.fieldValue.splice(e,1)})},e.$on("editor:entity_loaded",function(i,l){return"new"===l.editorEntityType?void(a.fieldValue=a.multiple?[""]:""):void(e.parentField?a.multiple?a.multiname?(a.fieldValue=[],angular.forEach(l[e.parentField][e.field.name],function(e){a.fieldValue.push(e[a.multiname])})):(a.fieldValue=[],angular.forEach(l[e.parentField][e.field.name],function(e){a.fieldValue.push(e)})):a.fieldValue=l[e.parentField][e.field.name]:a.multiple?a.multiname?(a.fieldValue=[],angular.forEach(l[e.field.name],function(e){a.fieldValue.push(e[a.multiname])})):(a.fieldValue=[],angular.forEach(l[e.field.name],function(e){a.fieldValue.push(e)})):a.fieldValue=l[e.field.name])}),e.$on("editor:api_error_field_"+n,function(i,l){angular.isArray(l)?angular.forEach(l,function(i){e.$parent.vm.error.indexOf(i)<0&&e.$parent.vm.error.push(i)}):e.$parent.vm.error.indexOf(l)<0&&e.$parent.vm.error.push(l)}),e.$on("$destroy",function(){i.deleteFieldController(a),a.parentFieldIndex&&l.fieldDestroy(e.parentField,e.parentFieldIndex,e.field.name,a.fieldValue)}),e.$watch(function(){return a.fieldValue},function(){e.$parent.vm.error=[]},!0)}angular.module("tinymce.plugin").controller("EditorFieldTinymceController",e),e.$inject=["$scope","EditEntityStorage","ArrayFieldStorage"]}(),function(){"use strict";function e(e){function i(e,i,l,n){i.on("$destroy",function(){e.$destroy()})}return{restrict:"A",replace:!0,scope:!0,template:e.get("module/directives/editorFieldTinymce/editorFieldTinymce.html"),controller:"EditorFieldTinymceController",controllerAs:"vm",link:i}}angular.module("tinymce.plugin").directive("editorFieldTinymce",e),e.$inject=["$templateCache"]}(),function(e){try{e=angular.module("tinymce.plugin.templates")}catch(i){e=angular.module("tinymce.plugin.templates",[])}e.run(["$templateCache",function(e){e.put("module/directives/editorFieldTinymce/editorFieldTinymce.html",'\n<div>\n    <div data-ng-if="vm.multiple" class="field-textarea-wrapper col-lg-6 col-md-6 col-sm-6 col-xs-6">\n        <div data-ng-repeat="field_item in vm.fieldValue track by $index" class="item-textarea-wrapper">\n            <div>\n                <textarea data-ui-tinymce="vm.wysiwygOptions" data-ng-model="vm.fieldValue[$index]"></textarea>\n                <div data-ng-click="vm.removeItem($index)" data-ng-if="!vm.readonly" class="btn btn-default btn-sm">x</div>\n            </div>\n        </div>\n        <div data-ng-click="vm.addItem()" data-ng-if="!vm.readonly" class="btn btn-primary btn-sm">{{\'BUTTON.ADD\' | translate}}</div>\n    </div>\n    <div data-ng-if="!vm.multiple" class="field-textarea-wrapper col-lg-6 col-md-6 col-sm-6 col-xs-6">\n        <div>\n            <textarea data-ui-tinymce="vm.wysiwygOptions" data-ng-model="vm.fieldValue"></textarea>\n        </div>\n    </div>\n</div>')}])}();