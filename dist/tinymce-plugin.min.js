!function(){"use strict";angular.module("tinymce.plugin",["tinymce.plugin.templates","ui.tinymce"]).config(function(){tinyMCE.baseURL="/assets/universal-editor/tinymce"})}(),function(){"use strict";function e(e,i,l,n){var t,a=this;t=i.parentField?i.parentFieldIndex?i.parentField+"_"+i.parentFieldIndex+"_"+i.fieldName:i.parentField+"_"+i.fieldName:i.fieldName,a.fieldName=i.field.name,a.readonly=i.field.readonly||!1,a.fieldValue="",i.field["tinymce-init"]?(a.wysiwygOptions=i.field["tinymce-init"],a.wysiwygOptions.readonly=a.readonly):a.wysiwygOptions={menubar:i.field.menubar||!0,plugins:"advlist autolink link lists charmap",skin:"lightgray",theme:"modern",readonly:a.readonly},i.$on("editor:tinymce_extended",function(e,i){angular.extend(a.wysiwygOptions,i)}),i.$parent.vm.error=[],a.parentFieldIndex=i.parentFieldIndex||!1,i.field.hasOwnProperty("multiple")&&i.field.multiple===!0?(a.multiple=!0,a.fieldValue=[],(i.field.multiname||angular.isString(i.field.multiname))&&(a.multiname=""+i.field.multiname||"value")):(a.multiple=!1,a.fieldValue=""),a.parentFieldIndex&&(a.multiple?(a.fieldValue=[],angular.forEach(n.getFieldValue(i.parentField,i.parentFieldIndex,i.field.name),function(e){a.multiname?a.fieldValue.push(e[a.multiname]):a.fieldValue.push(e)})):a.fieldValue=n.getFieldValue(i.parentField,i.parentFieldIndex,i.field.name)||""),l.addFieldController(this),this.getFieldValue=function(){var e,l={};return a.multiname?(e=[],angular.forEach(a.fieldValue,function(i){var l={};l[a.multiname]=i,e.push(l)})):a.multiple?(e=[],angular.forEach(a.fieldValue,function(i){e.push(i)})):e=a.fieldValue,i.parentField?a.parentFieldIndex?(l[i.parentField]=[],l[i.parentField][a.parentFieldIndex]={},l[i.parentField][a.parentFieldIndex][a.fieldName]=e):(l[i.parentField]={},l[i.parentField][a.fieldName]=e):l[a.fieldName]=e,l},this.getInitialValue=function(){var e={};return i.parentField?a.multiple?(e[i.parentField]={},e[i.parentField][a.fieldName]=[""]):(e[i.parentField]={},e[i.parentField][a.fieldName]=""):a.multiple?e[a.fieldName]=[""]:e[a.fieldName]="",e},a.addItem=function(){a.fieldValue.push("")},a.removeItem=function(e){angular.forEach(a.fieldValue,function(i,l){l==e&&a.fieldValue.splice(e,1)})},i.$on("editor:entity_loaded",function(e,l){return"new"===l.editorEntityType?void(a.fieldValue=a.multiple?[""]:""):void(i.parentField?a.multiple?a.multiname?(a.fieldValue=[],angular.forEach(l[i.parentField][i.field.name],function(e){a.fieldValue.push(e[a.multiname])})):(a.fieldValue=[],angular.forEach(l[i.parentField][i.field.name],function(e){a.fieldValue.push(e)})):a.fieldValue=l[i.parentField][i.field.name]:a.multiple?a.multiname?(a.fieldValue=[],angular.forEach(l[i.field.name],function(e){a.fieldValue.push(e[a.multiname])})):(a.fieldValue=[],angular.forEach(l[i.field.name],function(e){a.fieldValue.push(e)})):a.fieldValue=l[i.field.name])}),i.$on("editor:api_error_field_"+t,function(e,l){angular.isArray(l)?angular.forEach(l,function(e){i.$parent.vm.error.indexOf(e)<0&&i.$parent.vm.error.push(e)}):i.$parent.vm.error.indexOf(l)<0&&i.$parent.vm.error.push(l)}),i.$on("$destroy",function(){l.deleteFieldController(a),a.parentFieldIndex&&n.fieldDestroy(i.parentField,i.parentFieldIndex,i.field.name,a.fieldValue)}),i.$watch(function(){return a.fieldValue},function(){i.$parent.vm.error=[]},!0)}angular.module("tinymce.plugin").controller("EditorFieldTinymceController",e),e.$inject=["$rootScope","$scope","EditEntityStorage","ArrayFieldStorage"]}(),function(){"use strict";function e(e){function i(e,i,l,n){i.on("$destroy",function(){e.$destroy()})}return{restrict:"A",replace:!0,scope:!0,template:e.get("module/directives/editorFieldTinymce/editorFieldTinymce.html"),controller:"EditorFieldTinymceController",controllerAs:"vm",link:i}}angular.module("tinymce.plugin").directive("editorFieldTinymce",e),e.$inject=["$templateCache"]}(),function(e){try{e=angular.module("tinymce.plugin.templates")}catch(i){e=angular.module("tinymce.plugin.templates",[])}e.run(["$templateCache",function(e){e.put("module/directives/editorFieldTinymce/editorFieldTinymce.html",'\n<div>\n    <div data-ng-if="vm.multiple" class="field-textarea-wrapper col-lg-6 col-md-6 col-sm-6 col-xs-6">\n        <div data-ng-repeat="field_item in vm.fieldValue track by $index" class="item-textarea-wrapper">\n            <div>\n                <textarea data-ui-tinymce="vm.wysiwygOptions" data-ng-model="vm.fieldValue[$index]"></textarea>\n                <div data-ng-click="vm.removeItem($index)" data-ng-if="!vm.readonly" class="btn btn-default btn-sm">x</div>\n            </div>\n        </div>\n        <div data-ng-click="vm.addItem()" data-ng-if="!vm.readonly" class="btn btn-primary btn-sm">{{\'BUTTON.ADD\' | translate}}</div>\n    </div>\n    <div data-ng-if="!vm.multiple" class="field-textarea-wrapper col-lg-6 col-md-6 col-sm-6 col-xs-6">\n        <div>\n            <textarea data-ui-tinymce="vm.wysiwygOptions" data-ng-model="vm.fieldValue"></textarea>\n        </div>\n    </div>\n</div>')}])}();