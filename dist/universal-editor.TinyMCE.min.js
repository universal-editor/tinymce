!function(){"use strict";angular.module("universalEditor.TinyMCE",["universalEditor.TinyMCE.templates","ui.tinymce"]).config(function(){tinyMCE.baseURL="/tinymce-plugin/files"})}(),function(){"use strict";function e(e,i,l,n){var a,t=this;a=i.parentField?i.parentFieldIndex?i.parentField+"_"+i.parentFieldIndex+"_"+i.fieldName:i.parentField+"_"+i.fieldName:i.fieldName,t.fieldName=i.field.name,t.readonly=i.field.readonly||!1,t.fieldValue="",i.field["tinymce-init"]?(t.wysiwygOptions=i.field["tinymce-init"],t.wysiwygOptions.readonly=t.readonly):t.wysiwygOptions={menubar:i.field.menubar||!0,plugins:"advlist autolink link lists charmap",skin:"lightgray",theme:"modern",readonly:t.readonly},i.$on("editor:tinymce_extended",function(e,i){angular.extend(t.wysiwygOptions,i)}),i.$parent.vm.error=[],t.parentFieldIndex=i.parentFieldIndex||!1,i.field.hasOwnProperty("multiple")&&i.field.multiple===!0?(t.multiple=!0,t.fieldValue=[],(i.field.multiname||angular.isString(i.field.multiname))&&(t.multiname=""+i.field.multiname||"value")):(t.multiple=!1,t.fieldValue=""),t.parentFieldIndex&&(t.multiple?(t.fieldValue=[],angular.forEach(n.getFieldValue(i.parentField,i.parentFieldIndex,i.field.name),function(e){t.multiname?t.fieldValue.push(e[t.multiname]):t.fieldValue.push(e)})):t.fieldValue=n.getFieldValue(i.parentField,i.parentFieldIndex,i.field.name)||""),l.addFieldController(this),this.getFieldValue=function(){var e,l={};return t.multiname?(e=[],angular.forEach(t.fieldValue,function(i){var l={};l[t.multiname]=i,e.push(l)})):t.multiple?(e=[],angular.forEach(t.fieldValue,function(i){e.push(i)})):e=t.fieldValue,i.parentField?t.parentFieldIndex?(l[i.parentField]=[],l[i.parentField][t.parentFieldIndex]={},l[i.parentField][t.parentFieldIndex][t.fieldName]=e):(l[i.parentField]={},l[i.parentField][t.fieldName]=e):l[t.fieldName]=e,l},this.getInitialValue=function(){var e={};return i.parentField?t.multiple?(e[i.parentField]={},e[i.parentField][t.fieldName]=[""]):(e[i.parentField]={},e[i.parentField][t.fieldName]=""):t.multiple?e[t.fieldName]=[""]:e[t.fieldName]="",e},t.addItem=function(){t.fieldValue.push("")},t.removeItem=function(e){angular.forEach(t.fieldValue,function(i,l){l==e&&t.fieldValue.splice(e,1)})},i.$on("editor:entity_loaded",function(e,l){return"new"===l.editorEntityType?void(t.fieldValue=t.multiple?[""]:""):void(i.parentField?t.multiple?t.multiname?(t.fieldValue=[],angular.forEach(l[i.parentField][i.field.name],function(e){t.fieldValue.push(e[t.multiname])})):(t.fieldValue=[],angular.forEach(l[i.parentField][i.field.name],function(e){t.fieldValue.push(e)})):t.fieldValue=l[i.parentField][i.field.name]:t.multiple?t.multiname?(t.fieldValue=[],angular.forEach(l[i.field.name],function(e){t.fieldValue.push(e[t.multiname])})):(t.fieldValue=[],angular.forEach(l[i.field.name],function(e){t.fieldValue.push(e)})):t.fieldValue=l[i.field.name])}),i.$on("editor:api_error_field_"+a,function(e,l){angular.isArray(l)?angular.forEach(l,function(e){i.$parent.vm.error.indexOf(e)<0&&i.$parent.vm.error.push(e)}):i.$parent.vm.error.indexOf(l)<0&&i.$parent.vm.error.push(l)}),i.$on("$destroy",function(){l.deleteFieldController(t),t.parentFieldIndex&&n.fieldDestroy(i.parentField,i.parentFieldIndex,i.field.name,t.fieldValue)}),i.$watch(function(){return t.fieldValue},function(){i.$parent.vm.error=[]},!0)}angular.module("universalEditor.TinyMCE").controller("EditorFieldTinymceController",e),e.$inject=["$rootScope","$scope","EditEntityStorage","ArrayFieldStorage"]}(),function(){"use strict";function e(e){function i(e,i,l,n){i.on("$destroy",function(){e.$destroy()})}return{restrict:"A",replace:!0,scope:!0,template:e.get("module/directives/editorFieldTinymce/editorFieldTinymce.html"),controller:"EditorFieldTinymceController",controllerAs:"vm",link:i}}angular.module("universalEditor.TinyMCE").directive("editorFieldTinymce",e),e.$inject=["$templateCache"]}(),function(e){try{e=angular.module("universalEditor.TinyMCE.templates")}catch(i){e=angular.module("universalEditor.TinyMCE.templates",[])}e.run(["$templateCache",function(e){e.put("module/directives/editorFieldTinymce/editorFieldTinymce.html",'\n<div>\n    <div data-ng-if="vm.multiple" class="field-textarea-wrapper col-lg-6 col-md-6 col-sm-6 col-xs-6">\n        <div data-ng-repeat="field_item in vm.fieldValue track by $index" class="item-textarea-wrapper">\n            <div>\n                <textarea data-ui-tinymce="vm.wysiwygOptions" data-ng-model="vm.fieldValue[$index]"></textarea>\n                <div data-ng-click="vm.removeItem($index)" data-ng-if="!vm.readonly" class="btn btn-default btn-sm">x</div>\n            </div>\n        </div>\n        <div data-ng-click="vm.addItem()" data-ng-if="!vm.readonly" class="btn btn-primary btn-sm">{{\'BUTTON.ADD\' | translate}}</div>\n    </div>\n    <div data-ng-if="!vm.multiple" class="field-textarea-wrapper col-lg-6 col-md-6 col-sm-6 col-xs-6">\n        <div>\n            <textarea data-ui-tinymce="vm.wysiwygOptions" data-ng-model="vm.fieldValue"></textarea>\n        </div>\n    </div>\n</div>')}])}();